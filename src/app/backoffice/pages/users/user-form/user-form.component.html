<div class="container-fluid">
  <div class="col-md-6 mt-5 mb-5 mx-auto fadeIn second">
    <div id="formContent">
      <div class="header fadeIn first mb-4">
        <img
          class="logo"
          src="../../../../../assets/images/logo.png"
          alt="logo"
        />
        <h4>{{ title }} usuario</h4>
      </div>
      <form [formGroup]="userForm" (ngSubmit)="submit()">
        <div class="field">
          <label for="name" class="block">Nombre</label>
          <input
            [ngClass]="{
              'ng-invalid ng-dirty':
                userForm.get('name')?.touched && userForm.get('name')?.errors
            }"
            formControlName="name"
            id="name"
            type="text"
            aria-describedby="name-help"
            pInputText
          />
          <small
            *ngIf="
              userForm.get('name')?.touched && userForm.get('name')?.errors
            "
            id="name-help"
            class="p-error block"
            >El nombre debe tener un mínimo de 4 caracteres.</small
          >
        </div>
        <div class="field">
          <label for="email" class="block">Email</label>
          <input
            [ngClass]="{
              'ng-invalid ng-dirty':
                userForm.get('email')?.touched && userForm.get('email')?.errors
            }"
            formControlName="email"
            id="email"
            type="text"
            aria-describedby="email-help"
            pInputText
          />
          <small
            *ngIf="
              userForm.get('email')?.touched && userForm.get('email')?.errors
            "
            id="email-help"
            class="p-error block"
            >Ingrese un email válido.</small
          >
        </div>
        <div *ngIf="id != 0" class="field">
          <label for="password" class="block">Contraseña</label>
          <input
            [ngClass]="{
              'ng-invalid ng-dirty':
                userForm.get('password')?.touched && userForm.get('password')?.errors
            }"
            formControlName="password"
            id="password"
            type="password"
            aria-describedby="password-help"
            pInputText
            readonly
          />
        </div>
        <div *ngIf="id == 0" class="field">
          <label for="password" class="block">Contraseña</label>
          <input
            [ngClass]="{
              'ng-invalid ng-dirty':
                userForm.get('password')?.touched && userForm.get('password')?.errors
            }"
            formControlName="password"
            id="password"
            type="password"
            aria-describedby="password-help"
            pInputText
          />
          <small
            *ngIf="
              userForm.get('password')?.touched && userForm.get('password')?.errors
            "
            id="password-help"
            class="p-error block"
            >Ingrese una contraseña válida.</small
          >
        </div>
        <div class="field">
          <label for="profile_image" class="block">Foto de perfil</label>
          <div *ngIf="file">
            <div class="text-container">
              <img
                style="width: 200px"
                class="img-thumbnail"
                src="{{ file }}"
                alt=""
              />
            </div>
            <small id="image-text" class="block">
              Para modificar la imagen seleccione un nuevo archivo.
            </small>
          </div>
          <p-fileUpload
            id="profile_image"
            [customUpload]="true"
            name="profile_image"
            #fileUploader
            (uploadHandler)="onUpload($event, fileUploader)"
            [multiple]="false"
            accept="image/*.jpg image/*.png"
            class="mt-3"
          ></p-fileUpload>
        </div>
        <div class="field">
          <label for="address" class="block">Dirección</label>
          <textarea
            [ngClass]="{
              'ng-invalid ng-dirty':
                userForm.get('address')?.touched &&
                userForm.get('address')?.errors
            }"
            formControlName="address"
            id="address"
            [rows]="2"
            [cols]="30"
            pInputTextarea
            [autoResize]="true"
          ></textarea>
          <small
            *ngIf="
              userForm.get('address')?.touched &&
              userForm.get('address')?.errors
            "
            id="address-text"
            class="p-error block"
          >
            La dirección debe tener un mínimo de 4 caracteres.
          </small>
        </div>
        <div class="field">
          <label for="role_id" class="block">Role</label>
          <p-dropdown
            [ngClass]="{
              'ng-invalid ng-dirty':
                userForm.get('role_id')?.touched &&
                userForm.get('role_id')?.errors
            }"
            formControlName="role_id"
            placeholder="Seleccione una opción"
            optionLabel="name"
            optionValue="code"
            [options]="role"
          ></p-dropdown>
          <small
            *ngIf="
              userForm.get('role_id')?.touched &&
              userForm.get('role_id')?.errors
            "
            id="role-text"
            class="p-error block"
          >
            Seleccione un rol.
          </small>
        </div>
        <button
          pButton
          pRipple
          type="button"
          label="{{ button }}"
          class="primary mt-5"
          (click)="submit()"
        ></button>
      </form>
    </div>
  </div>
</div>
